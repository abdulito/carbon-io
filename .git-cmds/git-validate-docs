#!/usr/bin/env python

from __future__ import (
    division,
    unicode_literals,
    print_function,
    absolute_import
)

import gitcmdutils.version_utils as version_utils
import argparse
import logging
import sys

def main():
    parser = \
        argparse.ArgumentParser(description='update carbon-io docs submodules')
    
    parser.add_argument('-v', '--verbose', action='store_true',
                        help='log debug output')

    opts = parser.parse_args(sys.argv[1:])

    logging.basicConfig(level=logging.DEBUG if opts.verbose else logging.WARN)

    def action_on_mismatch(dirpath, package, current_version, latest_matching_tag):
        raise Exception("Current version (%s) of %s does not match latest tag: %s" % (current_version, package, latest_matching_tag))

    version_utils.compare_submodule_versions_to_latest(action_on_mismatch=action_on_mismatch)    

    return 0


if __name__ == '__main__':
    sys.exit(main())

